import{_ as i,o as a,c as e,aA as n}from"./chunks/framework.A7OkVGlh.js";const c=JSON.parse('{"title":"Rereference","description":"","frontmatter":{},"headers":[],"relativePath":"demos/rereference.md","filePath":"demos/rereference.md","lastUpdated":null}'),l={name:"demos/rereference.md"};function h(t,s,p,r,k,d){return a(),e("div",null,[...s[0]||(s[0]=[n(`<h1 id="Rereference" tabindex="-1">Rereference <a class="header-anchor" href="#Rereference" aria-label="Permalink to &quot;Rereference {#Rereference}&quot;">​</a></h1><p>This demo demonstrates applying different re-referencing schemes to EEG data.</p><p>This demo demonstrates applying different re-referencing schemes to EEG data.</p><h3 id="What-is-Re-referencing?" tabindex="-1">What is Re-referencing? <a class="header-anchor" href="#What-is-Re-referencing?" aria-label="Permalink to &quot;What is Re-referencing? {#What-is-Re-referencing?}&quot;">​</a></h3><p>Re-referencing changes the voltage baseline by subtracting a reference signal from all electrodes. Since EEG measures potential differences, the choice of reference affects:</p><ul><li><p>Signal amplitudes and topographies</p></li><li><p>Component interpretations</p></li><li><p>Statistical comparisons</p></li></ul><h3 id="Why-Re-reference?" tabindex="-1">Why Re-reference? <a class="header-anchor" href="#Why-Re-reference?" aria-label="Permalink to &quot;Why Re-reference? {#Why-Re-reference?}&quot;">​</a></h3><p><strong>Recording reference</strong>: The reference used during data acquisition (e.g., Cz, linked mastoids, or manufacturer default)</p><p><strong>Analysis reference</strong>: The reference appropriate for your research question and field conventions</p><p>Re-referencing allows you to change from the recording reference to a more appropriate analysis reference.</p><h3 id="Common-Reference-Schemes" tabindex="-1">Common Reference Schemes <a class="header-anchor" href="#Common-Reference-Schemes" aria-label="Permalink to &quot;Common Reference Schemes {#Common-Reference-Schemes}&quot;">​</a></h3><p><strong>Average Reference (<code>:avg</code>)</strong>:</p><ul><li><p>Subtracts mean of all electrodes from each channel</p></li><li><p>Assumes zero average scalp potential</p></li><li><p>Most common for high-density EEG (64+ channels)</p></li><li><p>Reference-free topographies</p></li></ul><p><strong>Mastoid Reference</strong>:</p><ul><li><p>References to average of left/right mastoid electrodes (e.g., <code>:M1</code>, <code>:M2</code>)</p></li><li><p>Common in ERP research</p></li><li><p>Reduces contamination from reference site activity</p></li></ul><p><strong>Single Electrode Reference</strong>:</p><ul><li><p>References to a specific electrode (e.g., <code>:Cz</code>, <code>:Fz</code>)</p></li><li><p>Useful for specific research questions</p></li><li><p>Activity at reference site becomes invisible (single reference electrode = 0)</p></li></ul><h3 id="Best-Practices" tabindex="-1">Best Practices <a class="header-anchor" href="#Best-Practices" aria-label="Permalink to &quot;Best Practices {#Best-Practices}&quot;">​</a></h3><ul><li><p>Apply the same reference across all conditions and participants</p></li><li><p>Re-reference <strong>before</strong> interpolating bad channels (bad channels affect average reference)</p></li><li><p>Document your reference choice in publications</p></li><li><p>Use average reference for high-density recordings</p></li></ul><h3 id="Re-referencing-is-Reversible" tabindex="-1">Re-referencing is Reversible <a class="header-anchor" href="#Re-referencing-is-Reversible" aria-label="Permalink to &quot;Re-referencing is Reversible {#Re-referencing-is-Reversible}&quot;">​</a></h3><p>You can change references multiple times. EegFun tracks the current reference and updates accordingly.</p><h2 id="Workflow-Summary" tabindex="-1">Workflow Summary <a class="header-anchor" href="#Workflow-Summary" aria-label="Permalink to &quot;Workflow Summary {#Workflow-Summary}&quot;">​</a></h2><p>This demo shows re-referencing workflows:</p><h3 id="1.-Continuous-Data" tabindex="-1">1. Continuous Data <a class="header-anchor" href="#1.-Continuous-Data" aria-label="Permalink to &quot;1. Continuous Data {#1.-Continuous-Data}&quot;">​</a></h3><ul><li><p>Load and preprocess data</p></li><li><p>Apply different reference schemes (<code>:Fp1</code>, <code>:AF7</code>)</p></li><li><p>Visualize in databrowser to see effects</p></li></ul><h3 id="2.-Epoched-Data" tabindex="-1">2. Epoched Data <a class="header-anchor" href="#2.-Epoched-Data" aria-label="Permalink to &quot;2. Epoched Data {#2.-Epoched-Data}&quot;">​</a></h3><ul><li><p>Create epochs from continuous data</p></li><li><p>Apply references to segmented trials</p></li><li><p>Data structure automatically updated</p></li></ul><h3 id="3.-ERP-Data" tabindex="-1">3. ERP Data <a class="header-anchor" href="#3.-ERP-Data" aria-label="Permalink to &quot;3. ERP Data {#3.-ERP-Data}&quot;">​</a></h3><ul><li><p>Average epochs into ERPs</p></li><li><p>Apply references to averaged data</p></li><li><p>Reference changes preserved across data types</p></li></ul><h2 id="Code-Examples" tabindex="-1">Code Examples <a class="header-anchor" href="#Code-Examples" aria-label="Permalink to &quot;Code Examples {#Code-Examples}&quot;">​</a></h2><details class="details custom-block"><summary>Show Code</summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># read raw data {#read-raw-data}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">read_raw_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">./</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resources</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bdf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bdf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># read and preprate layout file {#read-and-preprate-layout-file}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout_file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">read_layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">./</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resources</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layouts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">biosemi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">biosemi72</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">csv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># create EegFun data structure (EegFun.ContinuousData) {#create-EegFun-data-structure-EegFun.ContinuousData}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">create_eegfun_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, layout_file);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Some minimal preprocessing (average reference and highpass filter) {#Some-minimal-preprocessing-average-reference-and-highpass-filter}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">highpass_filter!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rereference to :Fp1 {#Rereference-to-:Fp1}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rereference!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:Fp1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) dat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rereference to :AF7 {#Rereference-to-:AF7}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rereference!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:AF7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) dat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># We can also see the influence of reference using the databrowser {#We-can-also-see-the-influence-of-reference-using-the-databrowser}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">plot_databrowser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">################################</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Epoching {#Epoching}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">################################</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create some epoched data {#Create-some-epoched-data}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">epoch_cfg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [     EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EpochCondition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;ExampleEpoch1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;, trigger_sequences </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]),     EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EpochCondition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;ExampleEpoch2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quot;, trigger_sequences </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]), ] epochs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">extract_epochs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, epoch_cfg, (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -200 to 1000 ms</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rereference!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(epochs, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:Fp1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">all_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(epochs[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># first condition EegFun.all_data(epochs[2]) # second condition</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">################################</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ERPs {#ERPs}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">################################</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ERPs {#ERPs-2}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">erps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">average_epochs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(epochs)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rereference!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(erps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:Fp1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">all_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(erps[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">all_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(erps[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rereference!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(erps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:F1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">all_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(erps[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) EegFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">all_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(erps[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\`\`</span></span></code></pre></div></details><h2 id="See-Also" tabindex="-1">See Also <a class="header-anchor" href="#See-Also" aria-label="Permalink to &quot;See Also {#See-Also}&quot;">​</a></h2><ul><li><a href="./../reference/">API Reference</a></li></ul>`,33)])])}const o=i(l,[["render",h]]);export{c as __pageData,o as default};
